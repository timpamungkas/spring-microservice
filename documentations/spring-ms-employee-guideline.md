# Employee
Sample microservice created using [JHipster Generator](https://jhipster.github.io/creating-an-app/). Basically this is a Spring Boot applications that runs as [Eureka Client](https://github.com/spring-cloud/spring-cloud-netflix/blob/master/docs/src/main/asciidoc/spring-cloud-netflix.adoc#service-discovery-eureka-clients). 
This will use entity generated by jhipster using [this guidance](https://jhipster.github.io/creating-an-entity/)

## !!! Source Code in This Repository
This source code repository is meant only for example purpose. When creating a new project, it is recommended that you use create new JHipster application using latest JHispter release.

## Installation
To start with microservice, [create a jhipster application](https://jhipster.github.io/creating-an-app/).
In this example, I use JHipster 3.11 with following combination (my answer in **bold**) during JHipster generation:

1. (1/13) Which *type* of application would you like to create? **Microservice application**
2. (2/13) What is the base name of your application? **employee**
3. (3/13) As you are running in a microservice architecture, on which port would like your server to run? It should be u
nique to avoid port conflicts. **8082**
4. (4/13) What is your default Java package name? **com.springms.employee**
5. (5/13) Which *type* of authentication would you like to use? **JWT authentication (stateless, with a token)**
6. (6/13) Which Service Discovery and Configuration solution would you like to use? **JHipster Registry (using Eureka and Spring Cloud Config)**
7. (7/13) Which *type* of database would you like to use? **SQL (H2, MySQL, MariaDB, PostgreSQL, Oracle)**
8. (8/13) Which *production* database would you like to use? **MySQL**
9. (9/13) Which *development* database would you like to use? **H2 with disk-based persistence**
10. (10/13) Do you want to use Hibernate 2nd level cache? **No**
11. (11/13) Would you like to use Maven or Gradle for building the backend? **Maven**
12. (12/13) Which other technologies would you like to use? **None**
13. (13/13) Would you like to enable internationalization support? **No**
14. (14/13) Which testing frameworks would you like to use? **None**

*Server app generated successfully.*

Since this is a microservice app, JHipster does not generate client side (angular). Client side must be generated on gateway. See explanation on [JHipster documentation](https://jhipster.github.io/microservices-architecture/) about microservices.

## Creating the Entity with JHipster Engine
* Entity **Employee** generated by jhipster using this command `yo jhipster:entity Employee --table-name employees`. The **Employee** will have following fields generated:
 * fullName (String max 50 char, required)
 * birthDate (LocalDate, required)
 * gender (String max 10 char, required)
 * idNumber(String max 20 char, not required)

This is parameter I used when generate the **Employee**:

1. Add fields as described above
2. Do you want to add a relationship to another entity? **No**
3. Do you want to use a Data Transfer Object (DTO)? **No, use the entity directly**
4. Do you want to use separate service class for your business logic? **Yes, generate a separate service class**
5. Do you want pagination on your entity? **Yes, with pagination links**

Note a few things :

 - JHipster will generate an `id` column automatically
 - JHipster will generate column name with proper naming fashion (for Java and database). Thus, fields above will be correctly named based on naming convention. In Java fields, this means camel case as I typed : `fullName`, `birthDate`, `gender`, `idNumber`, while on database (annotated with `@Column`) this will be named as `full_name`, `birth_date`, `gender`, and `id_number`
 - JHipster will generate all getters, setters, `toString()`, `hashCode()`, and `equals()` based on all columns

Entity will be generated as Hibernate style class, under `domain` sub-package. You can customize the generated entity further, but note that when you creating client side using JHipster, your customization might not included on client side.

## Creating the Entity without JHipster Engine
Yes this can be done. Basically you just create your own domain (`@Entity` class), create spring `JPARepository` or `CrudRepository` for your domain. And if you want to, you can create the boilerplate `DAO`, `Service`, and `ServiceImpl`. This is quite useful if you migrating from existing spring app into JHipster.
However if you create a new microservice, or a new entity, JHipster is really helpful in reducing your time writing skeleton codes.

## Run The Example
1. Make sure that service registry up and running on port 8761
2. (Optional) Make sure that API gateway up and running on port 8080
3. Run this project using `mvnw`

If you need basic technical explanation about microservice using Spring Cloud, seet [my other repo](https://github.com/timpamungkas/base-microservice)

## You Might Want to Know - Hibernate Version
Jhipster's 3.11 default hibernate version is 4.x.x, while currently hibernate already on hibernate 5. I try to update hibernate version into 5.2.x.Final, but it seems hibernate 5.2.x is not compatible with jhipster 3.11, because I keep getting error

In this case, if you want to use hibernate 5 ([why](http://stackoverflow.com/questions/31965179/whats-new-in-hibernate-5)) just use version `5.1.2.Final`

However, it's not without any reason that JHipster people does not update (yet) hibernate to version 5. By default, JHipster suggest [hazelcast](https://hazelcast.com/use-cases/caching/hibernate-second-level-cache/) for caching. By the time this article was written (JHipster 3.11 and Hibernate 5.x), Hazelcast has not provided support for Hibernate 5. So the decision is in your hand which hibernate version will you use.